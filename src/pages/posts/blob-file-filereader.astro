---
// Blobã€Fileã€FileReaderã€ArrayBufferã€Base64ã€URL.createObjectURL()çš„åŒºåˆ«
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blobã€Fileã€FileReaderã€ArrayBufferã€Base64ã€URL.createObjectURL()çš„åŒºåˆ«</title>
    
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
        background: #f8f9fa;
        color: #333;
      }
      .container {
        background: white;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
      }
      h2 {
        color: #34495e;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-top: 30px;
      }
      h3 {
        color: #2c3e50;
        margin-top: 25px;
      }
      .back-link {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        margin-top: 30px;
        transition: background 0.3s ease;
      }
      .back-link:hover {
        background: #2980b9;
      }
      .meta-info {
        text-align: center;
        color: #7f8c8d;
        margin-bottom: 30px;
        padding: 15px;
        background: #ecf0f1;
        border-radius: 8px;
      }
      .highlight-box {
        background: #fff3cd;
        padding: 20px;
        border-radius: 8px;
        border-left: 3px solid #f39c12;
        margin: 20px 0;
      }
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        border-radius: 8px;
        padding: 20px;
        margin: 15px 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
        overflow-x: auto;
        border-left: 4px solid #4299e1;
      }
      .code-comment {
        color: #68d391;
      }
      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        font-size: 0.9em;
      }
      .comparison-table th,
      .comparison-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e0e0e0;
        vertical-align: top;
      }
      .comparison-table th {
        background: #3498db;
        color: white;
        font-weight: 600;
        text-align: center;
      }
      .comparison-table tr:hover {
        background: #f8f9fa;
      }
      .comparison-table td:first-child {
        font-weight: 600;
        background: #f8f9fa;
        color: #2c3e50;
      }
      .feature-list {
        background: #e8f5e8;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #27ae60;
        margin: 20px 0;
      }
      .section-box {
        background: #f0f8ff;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #2196f3;
        margin: 20px 0;
      }
      .error-box {
        background: #ffe8e8;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #e74c3c;
        margin: 20px 0;
      }
      .diagram-box {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
        line-height: 1.8;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸš€ Blobã€Fileã€FileReaderã€ArrayBufferã€Base64ã€URL.createObjectURL()çš„åŒºåˆ«</h1>

      <div class="meta-info">
        <p>ğŸ“… å‘å¸ƒäº 2026å¹´2æœˆ | ğŸ‘¤ ä½œè€…ï¼šåšä¸» | ğŸ·ï¸ æ ‡ç­¾ï¼šBlob, File, FileReader, ArrayBuffer, Base64, URL.createObjectURL, Webå¼€å‘, å‰ç«¯, é¢è¯•</p>
      </div>

      <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢æ–‡ç« ï¼æ‰€æœ‰æ–‡ç« éƒ½æ˜¯æ»¡æ»¡çš„å‰ç«¯å¹²è´§ï¼Œæ–‡ç« ç®€æ˜æ‰¼è¦ã€‚</p>

      <h2>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”</h2>

      <table class="comparison-table">
        <thead>
          <tr>
            <th>æ¦‚å¿µ</th>
            <th>æœ¬è´¨</th>
            <th>ç”¨é€”</th>
            <th>ç‰¹ç‚¹</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Blob</td>
            <td>äºŒè¿›åˆ¶å¤§å¯¹è±¡</td>
            <td>å­˜å‚¨/ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®</td>
            <td>ä¸å¯å˜ã€æœ‰typeå’Œsizeã€å¯åˆ‡ç‰‡</td>
          </tr>
          <tr>
            <td>File</td>
            <td>Blobçš„å­ç±»</td>
            <td>è¡¨ç¤ºç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶</td>
            <td>é¢å¤–æœ‰nameã€lastModifiedç­‰æ–‡ä»¶å…ƒä¿¡æ¯</td>
          </tr>
          <tr>
            <td>ArrayBuffer</td>
            <td>åŸå§‹äºŒè¿›åˆ¶ç¼“å†²åŒº</td>
            <td>åº•å±‚æ•°æ®å­˜å‚¨</td>
            <td>ä¸èƒ½ç›´æ¥æ“ä½œï¼Œéœ€é€šè¿‡TypedArrayæˆ–DataView</td>
          </tr>
          <tr>
            <td>Base64</td>
            <td>ç¼–ç æ ¼å¼ï¼ˆå­—ç¬¦ä¸²ï¼‰</td>
            <td>æ•°æ®åµŒå…¥ã€ä¼ è¾“</td>
            <td>ä½“ç§¯å¢å¤§çº¦33%ï¼Œçº¯æ–‡æœ¬ä¾¿äºä¼ è¾“</td>
          </tr>
          <tr>
            <td>FileReader</td>
            <td>APIå·¥å…·ç±»</td>
            <td>è¯»å–Blob/Fileå†…å®¹</td>
            <td>å¼‚æ­¥ã€æ”¯æŒå¤šç§è¯»å–æ–¹å¼</td>
          </tr>
          <tr>
            <td>URL.createObjectURL()</td>
            <td>APIæ–¹æ³•</td>
            <td>ç”Ÿæˆä¸´æ—¶URL</td>
            <td>åŒæ­¥ã€éœ€æ‰‹åŠ¨revokeObjectURL()é‡Šæ”¾</td>
          </tr>
        </tbody>
      </table>

      <h2>äºŒã€å…³ç³»å›¾è°±</h2>

      <div class="diagram-box">
ArrayBuffer (åº•å±‚æ•°æ®)<br>
&nbsp;&nbsp;â†‘<br>
&nbsp;&nbsp;| é€šè¿‡TypedArray/DataViewæ“ä½œ<br>
&nbsp;&nbsp;|<br>
Blob â”€â”€â”€â”<br>
&nbsp;â†‘&nbsp;&nbsp;&nbsp;â”‚ æœ‰type/size<br>
&nbsp;|&nbsp;&nbsp;&nbsp;â”‚ å¯åˆ‡ç‰‡<br>
&nbsp;|&nbsp;&nbsp;&nbsp;â†“<br>
File (ç»§æ‰¿Blobï¼Œå¢åŠ name/lastModified)<br>
&nbsp;â”‚<br>
&nbsp;â”œâ”€â†’ FileReader (å¼‚æ­¥è¯»å–å†…å®¹)<br>
&nbsp;â”‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ readAsArrayBuffer()<br>
&nbsp;â”‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ readAsDataURL() â†’ Base64<br>
&nbsp;â”‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ readAsText()<br>
&nbsp;â”‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€ readAsBinaryString()<br>
&nbsp;â”‚<br>
&nbsp;â””â”€â†’ URL.createObjectURL() (åŒæ­¥ç”Ÿæˆä¸´æ—¶URL)
      </div>

      <h2>ä¸‰ã€ä»£ç ç¤ºä¾‹å¯¹æ¯”</h2>

      <h3>Blob vs File</h3>

      <div class="code-block">
<span class="code-comment">// Blobï¼šåªæœ‰typeå’Œsize</span><br>
const blob = new Blob(['Hello'], {'{'} type: 'text/plain' {'}'});<br>
console.log(blob.type);&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// "text/plain"</span><br>
console.log(blob.size);&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 5</span><br>
<span class="code-comment">// âŒ blob.name ä¸å­˜åœ¨</span><br><br>

<span class="code-comment">// Fileï¼šç»§æ‰¿Blob + æ–‡ä»¶ä¿¡æ¯</span><br>
const file = new File(['World'], 'test.txt', {'{'} type: 'text/plain' {'}'});<br>
console.log(file.type);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// "text/plain"</span><br>
console.log(file.size);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// 5</span><br>
console.log(file.name);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// "test.txt" âœ…</span><br>
console.log(file.lastModified); <span class="code-comment">// æ—¶é—´æˆ³ âœ…</span>
      </div>

      <h3>FileReader è¯»å–æ–¹å¼å¯¹æ¯”</h3>

      <div class="code-block">
const fileInput = document.querySelector('input[type="file"]');<br>
fileInput.addEventListener('change', (e) => {'{'}<br>
&nbsp;&nbsp;const file = e.target.files[0];<br>
&nbsp;&nbsp;const reader = new FileReader();<br><br>

&nbsp;&nbsp;<span class="code-comment">// æ–¹å¼1ï¼šè¯»ä¸ºBase64ï¼ˆå¸¸ç”¨äºå›¾ç‰‡é¢„è§ˆï¼‰</span><br>
&nbsp;&nbsp;reader.readAsDataURL(file);<br>
&nbsp;&nbsp;reader.onload = () => {'{'}<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(reader.result); <span class="code-comment">// "data:image/png;base64,iVBORw0KG..."</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;document.querySelector('img').src = reader.result;<br>
&nbsp;&nbsp;{'}'};<br><br>

&nbsp;&nbsp;<span class="code-comment">// æ–¹å¼2ï¼šè¯»ä¸ºArrayBufferï¼ˆç”¨äºäºŒè¿›åˆ¶å¤„ç†ï¼‰</span><br>
&nbsp;&nbsp;reader.readAsArrayBuffer(file);<br>
&nbsp;&nbsp;reader.onload = () => {'{'}<br>
&nbsp;&nbsp;&nbsp;&nbsp;const buffer = reader.result; <span class="code-comment">// ArrayBuffer</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;const uint8 = new Uint8Array(buffer);<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(uint8); <span class="code-comment">// [137, 80, 78, 71, ...]</span><br>
&nbsp;&nbsp;{'}'};<br><br>

&nbsp;&nbsp;<span class="code-comment">// æ–¹å¼3ï¼šè¯»ä¸ºæ–‡æœ¬</span><br>
&nbsp;&nbsp;reader.readAsText(file, 'utf-8');<br>
&nbsp;&nbsp;reader.onload = () => {'{'}<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(reader.result); <span class="code-comment">// "æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²"</span><br>
&nbsp;&nbsp;{'}'};<br>
{'}'});
      </div>

      <h3>URL.createObjectURL() vs FileReaderï¼ˆå›¾ç‰‡é¢„è§ˆï¼‰</h3>

      <div class="code-block">
const file = e.target.files[0];<br><br>

<span class="code-comment">// âœ… æ¨èï¼šURL.createObjectURL() - åŒæ­¥ã€æ€§èƒ½å¥½</span><br>
const url1 = URL.createObjectURL(file);<br>
img.src = url1;<br>
<span class="code-comment">// ç”¨å®Œè®°å¾—é‡Šæ”¾</span><br>
img.onload = () => URL.revokeObjectURL(url1);<br><br>

<span class="code-comment">// âš ï¸ ä¼ ç»Ÿï¼šFileReader - å¼‚æ­¥ã€è¾ƒæ…¢</span><br>
const reader = new FileReader();<br>
reader.readAsDataURL(file);<br>
reader.onload = () => {'{'}<br>
&nbsp;&nbsp;img.src = reader.result; <span class="code-comment">// "data:image/png;base64,..."</span><br>
{'}'};
      </div>

      <table class="comparison-table">
        <thead>
          <tr>
            <th>å¯¹æ¯”é¡¹</th>
            <th>createObjectURL()</th>
            <th>FileReader.readAsDataURL()</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>é€Ÿåº¦</td>
            <td>âš¡ åŒæ­¥ï¼Œç«‹å³è¿”å›</td>
            <td>ğŸŒ å¼‚æ­¥ï¼Œéœ€ç­‰å¾…</td>
          </tr>
          <tr>
            <td>å†…å­˜</td>
            <td>ğŸ”— å¼•ç”¨åŸBlob</td>
            <td>ğŸ“¦ å¤åˆ¶ä¸€ä»½Base64</td>
          </tr>
          <tr>
            <td>URLé•¿åº¦</td>
            <td>çŸ­ï¼ˆblob:http://...ï¼‰</td>
            <td>é•¿ï¼ˆå«å®Œæ•´Base64ï¼‰</td>
          </tr>
          <tr>
            <td>é‡Šæ”¾</td>
            <td>éœ€æ‰‹åŠ¨revokeObjectURL()</td>
            <td>è‡ªåŠ¨</td>
          </tr>
          <tr>
            <td>é€‚ç”¨åœºæ™¯</td>
            <td>å›¾ç‰‡/è§†é¢‘é¢„è§ˆ</td>
            <td>éœ€Base64çš„åœºæ™¯ï¼ˆå¦‚ä¸Šä¼ åˆ°æŸäº›APIï¼‰</td>
          </tr>
        </tbody>
      </table>

      <h2>å››ã€å®é™…åº”ç”¨åœºæ™¯</h2>

      <h3>ğŸ“¸ å›¾ç‰‡ä¸Šä¼ å‰é¢„è§ˆ</h3>

      <div class="code-block">
&lt;input type="file" accept="image/*" id="fileInput"&gt;<br>
&lt;img id="preview" style="max-width: 300px;"&gt;<br><br>

&lt;script&gt;<br>
document.getElementById('fileInput').addEventListener('change', (e) => {'{'}<br>
&nbsp;&nbsp;const file = e.target.files[0];<br>
&nbsp;&nbsp;<span class="code-comment">// æ–¹æ¡ˆ1ï¼šæ¨èï¼ˆæ€§èƒ½å¥½ï¼‰</span><br>
&nbsp;&nbsp;const url = URL.createObjectURL(file);<br>
&nbsp;&nbsp;preview.src = url;<br>
&nbsp;&nbsp;preview.onload = () => URL.revokeObjectURL(url);<br><br>

&nbsp;&nbsp;<span class="code-comment">// æ–¹æ¡ˆ2ï¼šéœ€è¦Base64æ—¶</span><br>
&nbsp;&nbsp;<span class="code-comment">// const reader = new FileReader();</span><br>
&nbsp;&nbsp;<span class="code-comment">// reader.readAsDataURL(file);</span><br>
&nbsp;&nbsp;<span class="code-comment">// reader.onload = () => preview.src = reader.result;</span><br>
{'}'});<br>
&lt;/script&gt;
      </div>

      <h3>ğŸ“¤ æ–‡ä»¶ä¸Šä¼ ï¼ˆFormData + Blobï¼‰</h3>

      <div class="code-block">
const file = e.target.files[0];<br><br>

<span class="code-comment">// ç›´æ¥ä¸Šä¼ Fileï¼ˆç»§æ‰¿è‡ªBlobï¼‰</span><br>
const formData = new FormData();<br>
formData.append('file', file, file.name);<br>
fetch('/upload', {'{'}<br>
&nbsp;&nbsp;method: 'POST',<br>
&nbsp;&nbsp;body: formData<br>
{'}'});<br><br>

<span class="code-comment">// æˆ–è€…ï¼šæˆªå–éƒ¨åˆ†ä¸Šä¼ ï¼ˆBlobåˆ‡ç‰‡ï¼‰</span><br>
const chunk = file.slice(0, 1024 * 1024); <span class="code-comment">// å‰1MB</span><br>
formData.append('chunk', chunk);
      </div>

      <h3>ğŸ¨ Canvaså¯¼å‡ºå›¾ç‰‡</h3>

      <div class="code-block">
const canvas = document.querySelector('canvas');<br>
const ctx = canvas.getContext('2d');<br><br>

<span class="code-comment">// Canvas â†’ Blob</span><br>
canvas.toBlob((blob) => {'{'}<br>
&nbsp;&nbsp;<span class="code-comment">// ç”Ÿæˆé¢„è§ˆURL</span><br>
&nbsp;&nbsp;const url = URL.createObjectURL(blob);<br>
&nbsp;&nbsp;const img = document.createElement('img');<br>
&nbsp;&nbsp;img.src = url;<br><br>

&nbsp;&nbsp;<span class="code-comment">// æˆ–è½¬ä¸ºBase64ä¸Šä¼ </span><br>
&nbsp;&nbsp;const reader = new FileReader();<br>
&nbsp;&nbsp;reader.readAsDataURL(blob);<br>
&nbsp;&nbsp;reader.onload = () => {'{'}<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(reader.result); <span class="code-comment">// "data:image/png;base64,..."</span><br>
&nbsp;&nbsp;{'}'};<br>
{'}'}, 'image/png', 0.9);
      </div>

      <h2>äº”ã€å¿«é€Ÿå†³ç­–è¡¨</h2>

      <table class="comparison-table">
        <thead>
          <tr>
            <th>éœ€æ±‚</th>
            <th>æ¨èæ–¹æ¡ˆ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>å›¾ç‰‡/è§†é¢‘é¢„è§ˆ</td>
            <td>URL.createObjectURL()</td>
          </tr>
          <tr>
            <td>ä¸Šä¼ åˆ°åç«¯</td>
            <td>FormData.append(file)</td>
          </tr>
          <tr>
            <td>éœ€è¦Base64å­—ç¬¦ä¸²</td>
            <td>FileReader.readAsDataURL()</td>
          </tr>
          <tr>
            <td>äºŒè¿›åˆ¶æ•°æ®å¤„ç†</td>
            <td>FileReader.readAsArrayBuffer()</td>
          </tr>
          <tr>
            <td>å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </td>
            <td>Blob.slice()</td>
          </tr>
          <tr>
            <td>æ–‡ä»¶å…ƒä¿¡æ¯ï¼ˆå/æ—¶é—´ï¼‰</td>
            <td>ç”¨Fileè€ŒéBlob</td>
          </tr>
        </tbody>
      </table>

      <h2>å…­ã€æ³¨æ„äº‹é¡¹</h2>

      <div class="error-box">
        <h4>âš ï¸ createObjectURL() å¿…é¡»é‡Šæ”¾ï¼Œå¦åˆ™å†…å­˜æ³„æ¼</h4>
        <div class="code-block">
const url = URL.createObjectURL(file);<br>
img.src = url;<br>
<span class="code-comment">// âœ… ç”¨å®Œç«‹å³é‡Šæ”¾</span><br>
img.onload = () => URL.revokeObjectURL(url);
        </div>
      </div>

      <div class="error-box">
        <h4>âš ï¸ Base64ä½“ç§¯æ›´å¤§</h4>
        <p>1MBæ–‡ä»¶ â†’ çº¦1.33MB Base64ï¼Œæ…ç”¨äºå¤§æ–‡ä»¶</p>
      </div>

      <div class="error-box">
        <h4>âš ï¸ FileReaderæ˜¯å¼‚æ­¥çš„ï¼Œä¸èƒ½ç›´æ¥returnç»“æœ</h4>
        <div class="code-block">
<span class="code-comment">// âŒ é”™è¯¯</span><br>
function read(file) {'{'}<br>
&nbsp;&nbsp;const reader = new FileReader();<br>
&nbsp;&nbsp;reader.readAsDataURL(file);<br>
&nbsp;&nbsp;return reader.result; <span class="code-comment">// undefined</span><br>
{'}'}<br><br>

<span class="code-comment">// âœ… æ­£ç¡®ï¼šç”¨Promise</span><br>
function read(file) {'{'}<br>
&nbsp;&nbsp;return new Promise((resolve) => {'{'}<br>
&nbsp;&nbsp;&nbsp;&nbsp;const reader = new FileReader();<br>
&nbsp;&nbsp;&nbsp;&nbsp;reader.onload = () => resolve(reader.result);<br>
&nbsp;&nbsp;&nbsp;&nbsp;reader.readAsDataURL(file);<br>
&nbsp;&nbsp;{'}'});<br>
{'}'}
        </div>
      </div>

      <h2>æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>

      <div class="highlight-box">
        <h4>ğŸ’¡ å…³é”®çŸ¥è¯†ç‚¹</h4>
        <ul>
          <li><strong>Blobï¼š</strong>äºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œä¸å¯å˜ï¼Œæœ‰typeå’Œsize</li>
          <li><strong>Fileï¼š</strong>ç»§æ‰¿Blobï¼Œé¢å¤–æœ‰nameå’ŒlastModified</li>
          <li><strong>ArrayBufferï¼š</strong>åº•å±‚äºŒè¿›åˆ¶ç¼“å†²åŒºï¼Œéœ€é€šè¿‡TypedArrayæ“ä½œ</li>
          <li><strong>Base64ï¼š</strong>ç¼–ç æ ¼å¼ï¼Œä½“ç§¯å¢å¤§33%ï¼Œä¾¿äºä¼ è¾“</li>
          <li><strong>FileReaderï¼š</strong>å¼‚æ­¥è¯»å–Blob/Fileå†…å®¹</li>
          <li><strong>URL.createObjectURL()ï¼š</strong>åŒæ­¥ç”Ÿæˆä¸´æ—¶URLï¼Œéœ€æ‰‹åŠ¨é‡Šæ”¾</li>
        </ul>
      </div>

      <div style="text-align: center;">
        <a href={`${import.meta.env.BASE_URL}`} class="back-link">â† è¿”å›é¦–é¡µ</a>
      </div>
    </div>
  </body>
</html>
