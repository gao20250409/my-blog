---
// JavaScriptå†…å­˜æ³„æ¼æ–‡ç« é¡µé¢
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScriptä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜åŠå…¶è§£å†³æ–¹æ³•</title>

    <!-- Cloudflare Web Analytics -->
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js"
      data-cf-beacon='{"token": "YOUR_BEACON_TOKEN"}'></script>

    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
        background: #f8f9fa;
        color: #333;
      }
      .container {
        background: white;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
      }
      h2 {
        color: #34495e;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-top: 30px;
      }
      h3 {
        color: #2c3e50;
        margin-top: 25px;
      }
      .back-link {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        margin-top: 30px;
        transition: background 0.3s ease;
      }
      .back-link:hover {
        background: #2980b9;
      }
      .meta-info {
        text-align: center;
        color: #7f8c8d;
        margin-bottom: 30px;
        padding: 15px;
        background: #ecf0f1;
        border-radius: 8px;
      }
      .feature-list {
        background: #e8f5e8;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #27ae60;
        margin: 20px 0;
      }

      /* ä»£ç å—æ ·å¼ */
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        border-radius: 8px;
        padding: 20px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 0.9em;
        overflow-x: auto;
        border-left: 4px solid #4299e1;
      }

      .code-comment {
        color: #68d391;
      }

      .code-good {
        color: #68d391;
      }

      .code-bad {
        color: #fc8181;
      }

      .highlight-box {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        padding: 20px;
        border-radius: 8px;
        border-left: 3px solid #f39c12;
        margin: 20px 0;
      }

      .highlight-box strong {
        color: #2c3e50;
      }

      .section-header {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #2196f3;
        margin: 25px 0;
        font-size: 1.1em;
      }

      .warning-box {
        background: #fff5f5;
        padding: 15px;
        border-radius: 6px;
        border-left: 3px solid #e53e3e;
        margin: 15px 0;
        font-size: 0.95em;
      }

      .success-box {
        background: #f0fff4;
        padding: 15px;
        border-radius: 6px;
        border-left: 3px solid #38a169;
        margin: 15px 0;
        font-size: 0.95em;
      }

      .leak-type {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #dc3545;
        margin: 20px 0;
      }

      .solution-box {
        background: #f0fff4;
        padding: 15px;
        border-radius: 6px;
        border-left: 3px solid #28a745;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸš€ JavaScriptä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜åŠå…¶è§£å†³æ–¹æ³•</h1>

      <div class="meta-info">
        <p>
          ğŸ“… å‘å¸ƒäº 2026å¹´1æœˆ | ğŸ‘¤ ä½œè€…ï¼šåšä¸» | ğŸ·ï¸ æ ‡ç­¾ï¼šå†…å­˜æ³„æ¼,
          JavaScriptä¼˜åŒ–, æ€§èƒ½ä¼˜åŒ–, åƒåœ¾å›æ”¶, Webå¼€å‘, å‰ç«¯, é¢è¯•
        </p>
      </div>

      <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢æ–‡ç« ï¼æ‰€æœ‰æ–‡ç« éƒ½æ˜¯æ»¡æ»¡çš„å‰ç«¯å¹²è´§ï¼Œæ–‡ç« ç®€æ˜æ‰¼è¦ã€‚</p>

      <h2>ä¸€ã€å¸¸è§çš„å†…å­˜æ³„æ¼ç±»å‹</h2>

      <div class="leak-type">
        <h3>1. æ„å¤–çš„å…¨å±€å˜é‡</h3>
        <p>
          <strong>é—®é¢˜ï¼š</strong>æœªå£°æ˜çš„å˜é‡ä¼šè‡ªåŠ¨æˆä¸ºå…¨å±€å˜é‡ï¼Œæ— æ³•è¢«åƒåœ¾å›æ”¶
        </p>

        <div class="solution-box">
          <strong>è§£å†³æ–¹æ³•ï¼š</strong>å§‹ç»ˆä½¿ç”¨ var/let/const
          å£°æ˜å˜é‡ï¼›å¯ç”¨ä¸¥æ ¼æ¨¡å¼ "use strict"
        </div>
      </div>

      <div class="leak-type">
        <h3>2. æœªæ¸…é™¤çš„å®šæ—¶å™¨æˆ–å›è°ƒ</h3>
        <p>
          <strong>é—®é¢˜ï¼š</strong>setIntervalã€setTimeout
          æœªæ¸…é™¤ï¼ŒæŒç»­å¼•ç”¨å›è°ƒå‡½æ•°å’Œå…¶é—­åŒ…
        </p>

        <div class="solution-box">
          <strong>è§£å†³æ–¹æ³•ï¼š</strong>ä¿å­˜å®šæ—¶å™¨ IDï¼Œåœ¨ç»„ä»¶é”€æ¯æ—¶è°ƒç”¨
          clearInterval/clearTimeout
        </div>
      </div>

      <div class="leak-type">
        <h3>3. é—­åŒ…æŒæœ‰å¤–éƒ¨å¼•ç”¨</h3>
        <p><strong>é—®é¢˜ï¼š</strong>é—­åŒ…æ„å¤–æŒæœ‰å¤§å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¼è‡´æ— æ³•å›æ”¶</p>

        <div class="solution-box">
          <strong>è§£å†³æ–¹æ³•ï¼š</strong>é¿å…ä¸å¿…è¦çš„é—­åŒ…å¼•ç”¨ï¼›ä½¿ç”¨å®Œåå°†å¼•ç”¨è®¾ä¸º
          null
        </div>
      </div>

      <div class="leak-type">
        <h3>4. DOM å¼•ç”¨æœªè§£é™¤</h3>
        <p><strong>é—®é¢˜ï¼š</strong>JavaScript æŒæœ‰å·²ä» DOM æ ‘ç§»é™¤çš„å…ƒç´ å¼•ç”¨</p>

        <div class="solution-box">
          <strong>è§£å†³æ–¹æ³•ï¼š</strong>ç§»é™¤ DOM å…ƒç´ åï¼Œå°† JavaScript ä¸­çš„å¼•ç”¨è®¾ä¸º
          null
        </div>
      </div>

      <div class="leak-type">
        <h3>5. äº‹ä»¶ç›‘å¬å™¨æœªç§»é™¤</h3>
        <p><strong>é—®é¢˜ï¼š</strong>æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨æœªåœ¨é€‚å½“æ—¶æœºç§»é™¤</p>

        <div class="solution-box">
          <strong>è§£å†³æ–¹æ³•ï¼š</strong>åœ¨ç»„ä»¶é”€æ¯æ—¶è°ƒç”¨
          removeEventListenerï¼›æˆ–ä½¿ç”¨äº‹ä»¶å§”æ‰˜
        </div>
      </div>

      <div class="leak-type">
        <h3>6. ç¼“å­˜æ— é™åˆ¶å¢é•¿</h3>
        <p><strong>é—®é¢˜ï¼š</strong>ç¼“å­˜å¯¹è±¡ä¸æ–­å¢é•¿ï¼Œä»ä¸æ¸…ç†è¿‡æœŸæ•°æ®</p>

        <div class="solution-box">
          <strong>è§£å†³æ–¹æ³•ï¼š</strong>ä½¿ç”¨ Map + LRU
          ç­–ç•¥ï¼Œæˆ–è®¾ç½®ç¼“å­˜å¤§å°ä¸Šé™ï¼Œå®šæœŸæ¸…ç†
        </div>
      </div>

      <h2>äºŒã€æ£€æµ‹å†…å­˜æ³„æ¼çš„æ–¹æ³•</h2>

      <h3>æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆDevToolsï¼‰</h3>
      <div class="feature-list">
        <h4>ğŸ” Chrome DevTools ä½¿ç”¨æ­¥éª¤ï¼š</h4>
        <ol>
          <li><strong>æ‰“å¼€ Memory é¢æ¿</strong>ï¼šChrome DevTools â†’ Memory</li>
          <li><strong>æ‹æ‘„å †å¿«ç…§</strong>ï¼šTake Heap Snapshot</li>
          <li><strong>æ‰§è¡Œæ“ä½œ</strong>ï¼šè§¦å‘å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„æ“ä½œ</li>
          <li><strong>å†æ¬¡æ‹æ‘„å¿«ç…§</strong>ï¼šå¯¹æ¯”å¤šæ¬¡å¿«ç…§</li>
          <li><strong>åˆ†æå·®å¼‚</strong>ï¼šæŸ¥çœ‹å¯¹è±¡æ˜¯å¦å¼‚å¸¸å¢é•¿</li>
        </ol>
      </div>

      <h3>æ¡†æ¶ä¸­çš„æœ€ä½³å®è·µ</h3>
      <div class="success-box">
        <strong>React Hook æ¸…ç†ï¼š</strong>åœ¨ useEffect
        çš„è¿”å›å‡½æ•°ä¸­æ¸…ç†å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬å™¨<br />
        <strong>Vue 3 æ¸…ç†ï¼š</strong>åœ¨ onBeforeUnmount é’©å­ä¸­è¿›è¡Œèµ„æºæ¸…ç†
        <div class="code-block">
          <span class="code-comment">// React Hook æ¸…ç†ç¤ºä¾‹</span><br />
          useEffect(() => {`{`}<br />
          &nbsp;&nbsp;const timer = setInterval(() => {`{`}<br />
          &nbsp;&nbsp;&nbsp;&nbsp;// å®šæ—¶ä»»åŠ¡<br />
          &nbsp;&nbsp;{`}`}, 1000);<br /><br />
          &nbsp;&nbsp;const handleResize = () => {`{`}<br />
          &nbsp;&nbsp;&nbsp;&nbsp;// å¤„ç†çª—å£å¤§å°å˜åŒ–<br />
          &nbsp;&nbsp;{`}`};<br /><br />
          &nbsp;&nbsp;window.addEventListener('resize', handleResize);<br /><br
          />
          &nbsp;&nbsp;<span class="code-comment">// æ¸…ç†å‡½æ•°</span><br />
          &nbsp;&nbsp;return () => {`{`}<br />
          &nbsp;&nbsp;&nbsp;&nbsp;clearInterval(timer);<br />
          &nbsp;&nbsp;&nbsp;&nbsp;window.removeEventListener('resize', handleResize);<br
          />
          &nbsp;&nbsp;{`}`};<br />
          }, []);<br /><br />

          <span class="code-comment">// Vue 3 æ¸…ç†ç¤ºä¾‹</span><br />
          onBeforeUnmount(() => {`{`}<br />
          &nbsp;&nbsp;<span class="code-comment"
            >// æ¸…ç†å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ç­‰</span
          ><br />
          &nbsp;&nbsp;clearInterval(timerId);<br />
          &nbsp;&nbsp;window.removeEventListener('scroll', handleScroll);<br />
          {`}`});
        </div>
      </div>

      <div class="highlight-box">
        <strong>ğŸ¯ é¢„é˜²å†…å­˜æ³„æ¼çš„æ ¸å¿ƒåŸåˆ™ï¼š</strong>
        <br /><br />
        <ul>
          <li><strong>åŠæ—¶æ¸…ç†</strong>ï¼šå®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ã€DOM å¼•ç”¨</li>
          <li><strong>é¿å…æ„å¤–å…¨å±€å˜é‡</strong>ï¼šä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œæ­£ç¡®å£°æ˜å˜é‡</li>
          <li><strong>åˆç†ä½¿ç”¨é—­åŒ…</strong>ï¼šé¿å…æŒæœ‰ä¸å¿…è¦çš„å¤–éƒ¨å¼•ç”¨</li>
          <li><strong>é™åˆ¶ç¼“å­˜å¤§å°</strong>ï¼šå®ç° LRU æˆ–å®šæœŸæ¸…ç†ç­–ç•¥</li>
          <li>
            <strong>å–„ç”¨ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåœ¨ React/Vue ç­‰æ¡†æ¶ä¸­æ­£ç¡®æ¸…ç†èµ„æº
          </li>
          <li><strong>å®šæœŸæ£€æµ‹</strong>ï¼šä½¿ç”¨ DevTools ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
        </ul>
      </div>

      <div style="text-align: center;">
        <a href={`${import.meta.env.BASE_URL}`} class="back-link">â† è¿”å›é¦–é¡µ</a>
      </div>
    </div>
  </body>
</html>
