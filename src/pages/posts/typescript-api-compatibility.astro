---
// TypeScriptä¸åç«¯APIå…¼å®¹æ€§æ–‡ç« é¡µé¢
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¦‚ä½•ç¡®ä¿TypeScriptä»£ç ä¸åç«¯APIçš„å…¼å®¹æ€§</title>
    
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
        background: #f8f9fa;
        color: #333;
      }
      .container {
        background: white;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
      }
      h2 {
        color: #34495e;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-top: 30px;
      }
      h3 {
        color: #2c3e50;
        margin-top: 25px;
      }
      h4 {
        color: #34495e;
        margin-top: 20px;
      }
      .back-link {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        margin-top: 30px;
        transition: background 0.3s ease;
      }
      .back-link:hover {
        background: #2980b9;
      }
      .meta-info {
        text-align: center;
        color: #7f8c8d;
        margin-bottom: 30px;
        padding: 15px;
        background: #ecf0f1;
        border-radius: 8px;
      }
      .highlight-box {
        background: #fff3cd;
        padding: 20px;
        border-radius: 8px;
        border-left: 3px solid #f39c12;
        margin: 20px 0;
      }
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        border-radius: 8px;
        padding: 20px;
        margin: 15px 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
        overflow-x: auto;
        border-left: 4px solid #4299e1;
      }
      .code-comment {
        color: #68d391;
      }
      .feature-list {
        background: #e8f5e8;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #27ae60;
        margin: 20px 0;
      }
      .section-box {
        background: #f0f8ff;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #2196f3;
        margin: 20px 0;
      }
      .workflow-box {
        background: #f3e5f5;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #9c27b0;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸš€ å¦‚ä½•ç¡®ä¿TypeScriptä»£ç ä¸åç«¯APIçš„å…¼å®¹æ€§</h1>

      <div class="meta-info">
        <p>ğŸ“… å‘å¸ƒäº 2026å¹´1æœˆ | ğŸ‘¤ ä½œè€…ï¼šåšä¸» | ğŸ·ï¸ æ ‡ç­¾ï¼šTypeScript, APIå…¼å®¹æ€§, OpenAPI, Zod, ç±»å‹å®‰å…¨, Webå¼€å‘, å‰ç«¯, é¢è¯•</p>
      </div>

      <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢æ–‡ç« ï¼æ‰€æœ‰æ–‡ç« éƒ½æ˜¯æ»¡æ»¡çš„å‰ç«¯å¹²è´§ï¼Œæ–‡ç« ç®€æ˜æ‰¼è¦ã€‚</p>

      <h2>âœ… ä¸€ã€æ ¸å¿ƒåŸåˆ™ï¼šå‰åç«¯å…±äº«ç±»å‹å®šä¹‰ï¼ˆShared Typesï¼‰</h2>

      <div class="highlight-box">
        <h4>ç›®æ ‡</h4>
        <p>è®©å‰ç«¯å’Œåç«¯ä½¿ç”¨åŒä¸€å¥—æ¥å£ç±»å‹ï¼Œé¿å…"å£å¤´çº¦å®š"å¯¼è‡´çš„å­—æ®µä¸ä¸€è‡´ã€‚</p>
      </div>

      <h3>æ–¹æ¡ˆ 1ï¼šä»åç«¯ç”Ÿæˆ TypeScript ç±»å‹ï¼ˆæ¨èï¼‰</h3>

      <div class="section-box">
        <p>è¿™æ˜¯æœ€å¯é çš„æ–¹å¼ï¼Œå°¤å…¶é€‚åˆä½ ä½¿ç”¨ Node.jsã€NestJSã€Spring Boot ç­‰æ”¯æŒ OpenAPI/Swagger çš„åç«¯ã€‚</p>
        
        <h4>æ­¥éª¤ï¼š</h4>
        <ol>
          <li>åç«¯æä¾› OpenAPI (Swagger) æ–‡æ¡£ï¼ˆä¾‹å¦‚ /api-docs.jsonï¼‰</li>
          <li>å‰ç«¯ç”¨å·¥å…·è‡ªåŠ¨ç”Ÿæˆ TS ç±»å‹å’Œ API å®¢æˆ·ç«¯</li>
        </ol>

        <div class="code-block">
<span class="code-comment"># ä½¿ç”¨ openapi-typescript</span><br>
npx openapi-typescript https://api.example.com/api-docs.json -o src/types/api.ts
        </div>

        <h4>ç”Ÿæˆçš„ç±»å‹ç¤ºä¾‹ï¼š</h4>
        <div class="code-block">
<span class="code-comment">// è‡ªåŠ¨ç”Ÿæˆçš„ api.ts</span><br>
export interface User {`{`}<br>
&nbsp;&nbsp;id: number;<br>
&nbsp;&nbsp;name: string;<br>
&nbsp;&nbsp;email: string;<br>
&nbsp;&nbsp;createdAt: string; <span class="code-comment">// ISO 8601</span><br>
{`}`}<br><br>

export type GetUsersResponse = User[];
        </div>
      </div>

      <h2>âœ… äºŒã€è¿è¡Œæ—¶æ ¡éªŒï¼šé˜²æ­¢"ç±»å‹æ­£ç¡®ä½†æ•°æ®å¼‚å¸¸"</h2>

      <div class="highlight-box">
        <p>å³ä½¿ TS ç±»å‹åŒ¹é…ï¼Œç½‘ç»œä¼ è¾“æˆ–åç«¯ bug ä»å¯èƒ½å¯¼è‡´æ•°æ®ä¸ç¬¦åˆé¢„æœŸã€‚å› æ­¤éœ€è¿è¡Œæ—¶æ ¡éªŒã€‚</p>
        <p><strong>ä½¿ç”¨ Zodï¼ˆæ¨èï¼‰æˆ– Yup è¿›è¡Œæ•°æ®éªŒè¯</strong></p>
      </div>

      <h2>å®Œæ•´ç¤ºä¾‹é¡¹ç›®</h2>

      <h3>1. å®‰è£…ä¾èµ–</h3>
      <div class="code-block">
npm install zod<br>
npm install -D openapi-typescript @types/node
      </div>

      <h3>2. é…ç½® package.json è„šæœ¬</h3>
      <div class="code-block">
{`{`}<br>
&nbsp;&nbsp;"scripts": {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;"gen:types": "node scripts/generate-api-types.ts",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"dev": "vite",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"build": "npm run gen:types && vite build"<br>
&nbsp;&nbsp;{`}`}<br>
{`}`}
      </div>

      <h3>3. ç¼–å†™ç±»å‹ç”Ÿæˆè„šæœ¬ï¼ˆscripts/generate-api-types.tsï¼‰</h3>
      <div class="code-block">
<span class="code-comment">// scripts/generate-api-types.ts</span><br>
import {`{`} generate {`}`} from 'openapi-typescript';<br>
import {`{`} writeFileSync {`}`} from 'fs';<br><br>

const OPENAPI_URL = 'https://your-backend.com/api/openapi.json'; <span class="code-comment">// æˆ–æœ¬åœ°è·¯å¾„ './openapi.json'</span><br><br>

async function main() {`{`}<br>
&nbsp;&nbsp;console.log('æ­£åœ¨ç”Ÿæˆ API ç±»å‹...');<br>
&nbsp;&nbsp;const schema = await generate(OPENAPI_URL, {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// å¯é€‰ï¼šè‡ªå®šä¹‰é…ç½®</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;exportType: true,<br>
&nbsp;&nbsp;&nbsp;&nbsp;pathParamsAsTypes: true,<br>
&nbsp;&nbsp;{`}`});<br>
&nbsp;&nbsp;writeFileSync('./src/api/types/index.ts', schema);<br>
&nbsp;&nbsp;console.log('âœ… API ç±»å‹å·²ç”Ÿæˆåˆ° src/api/types/index.ts');<br>
{`}`}<br><br>

main().catch(console.error);
      </div>

      <h3>4. è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹ç¤ºä¾‹ï¼ˆsrc/api/types/index.tsï¼‰</h3>
      <div class="section-box">
        <p>è¿è¡Œ <code>npm run gen:types</code> åï¼Œä¼šç”Ÿæˆç±»ä¼¼ï¼š</p>
        <div class="code-block">
<span class="code-comment">// src/api/types/index.ts (è‡ªåŠ¨ç”Ÿæˆ)</span><br>
export interface User {`{`}<br>
&nbsp;&nbsp;id: number;<br>
&nbsp;&nbsp;name: string;<br>
&nbsp;&nbsp;email: string;<br>
&nbsp;&nbsp;createdAt: string; <span class="code-comment">// ISO 8601</span><br>
{`}`}<br><br>

export interface GetUserResponse {`{`}<br>
&nbsp;&nbsp;data: User;<br>
{`}`}<br><br>

<span class="code-comment">// è·¯å¾„æ“ä½œç±»å‹</span><br>
export type paths = {`{`}<br>
&nbsp;&nbsp;'/api/users/{`{`}id{`}`}': {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;get: {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters: {`{`} path: {`{`} id: number {`}`} {`}`};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;responses: {`{`} 200: {`{`} content: {`{`} 'application/json': GetUserResponse {`}`} {`}`} {`}`};<br>
&nbsp;&nbsp;&nbsp;&nbsp;{`}`};<br>
&nbsp;&nbsp;{`}`};<br>
{`}`};
        </div>
      </div>

      <h3>5. ç¼–å†™ Zod Schemaï¼ˆsrc/api/schemas/user.schema.tsï¼‰</h3>
      <div class="code-block">
<span class="code-comment">// src/api/schemas/user.schema.ts</span><br>
import {`{`} z {`}`} from 'zod';<br><br>

export const UserSchema = z.object({`{`}<br>
&nbsp;&nbsp;id: z.number(),<br>
&nbsp;&nbsp;name: z.string(),<br>
&nbsp;&nbsp;email: z.string().email(),<br>
&nbsp;&nbsp;createdAt: z.string().datetime(),<br>
{`}`});<br><br>

export type User = z.infer&lt;typeof UserSchema&gt;;
      </div>

      <h3>6. å°è£… API å®¢æˆ·ç«¯ï¼ˆsrc/api/client.tsï¼‰</h3>
      <div class="code-block">
<span class="code-comment">// src/api/client.ts</span><br>
import {`{`} UserSchema {`}`} from './schemas/user.schema';<br>
import type {`{`} User {`}`} from './schemas/user.schema';<br><br>

<span class="code-comment">// é€šç”¨è¯·æ±‚å‡½æ•°</span><br>
async function request&lt;T&gt;(url: string): Promise&lt;T&gt; {`{`}<br>
&nbsp;&nbsp;const res = await fetch(url);<br>
&nbsp;&nbsp;if (!res.ok) throw new Error('HTTP ' + res.status);<br>
&nbsp;&nbsp;const json = await res.json();<br>
&nbsp;&nbsp;return json as T; <span class="code-comment">// åç»­ç”¨ Zod æ ¡éªŒ</span><br>
{`}`}<br><br>

<span class="code-comment">// ç±»å‹å®‰å…¨çš„ç”¨æˆ· API</span><br>
export async function fetchUser(id: number): Promise&lt;User&gt; {`{`}<br>
&nbsp;&nbsp;const data = await request('/api/users/' + id);<br>
&nbsp;&nbsp;return UserSchema.parse(data); <span class="code-comment">// è¿è¡Œæ—¶æ ¡éªŒï¼</span><br>
{`}`}
      </div>

      <h3>ğŸ§© 7. ä¸šåŠ¡æœåŠ¡å±‚ï¼ˆsrc/services/user.service.tsï¼‰</h3>
      <div class="code-block">
<span class="code-comment">// src/services/user.service.ts</span><br>
import {`{`} fetchUser {`}`} from '@/api/client';<br><br>

export class UserService {`{`}<br>
&nbsp;&nbsp;static async getUserProfile(userId: number) {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;try {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const user = await fetchUser(userId);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return user;<br>
&nbsp;&nbsp;&nbsp;&nbsp;{`}`} catch (error) {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼ˆå¯ä¸ŠæŠ¥ Sentryï¼‰</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('è·å–ç”¨æˆ·å¤±è´¥:', error);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;<br>
&nbsp;&nbsp;&nbsp;&nbsp;{`}`}<br>
&nbsp;&nbsp;{`}`}<br>
{`}`}
      </div>

      <h3>8. ä½¿ç”¨ç¤ºä¾‹ï¼ˆReact ç»„ä»¶ï¼‰</h3>
      <div class="code-block">
<span class="code-comment">// UserProfile.tsx</span><br>
import {`{`} useState, useEffect {`}`} from 'react';<br>
import {`{`} UserService {`}`} from '@/services/user.service';<br><br>

export default function UserProfile({`{`} userId {`}`}: {`{`} userId: number {`}`}) {`{`}<br>
&nbsp;&nbsp;const [user, setUser] = useState&lt;User | null&gt;(null);<br><br>

&nbsp;&nbsp;useEffect(() => {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;UserService.getUserProfile(userId)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(setUser)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(err => {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// ZodError æˆ–ç½‘ç»œé”™è¯¯éƒ½ä¼šè¢«æ•è·</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert('åŠ è½½ç”¨æˆ·å¤±è´¥');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{`}`});<br>
&nbsp;&nbsp;{`}`}, [userId]);<br><br>

&nbsp;&nbsp;if (!user) return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;<br>
&nbsp;&nbsp;return &lt;div&gt;æ¬¢è¿, {`{`}user.name{`}`}!&lt;/div&gt;;<br>
{`}`}
      </div>

      <h2>npm run gen:types å¹²å•¥ç”¨çš„ï¼Ÿ</h2>

      <div class="workflow-box">
        <h4>ğŸ”„ å…¸å‹å·¥ä½œæµ</h4>
        <ol>
          <li>åç«¯æ›´æ–°äº† APIï¼ˆæ¯”å¦‚æ–°å¢äº†ä¸€ä¸ª phone å­—æ®µï¼‰</li>
          <li>å‰ç«¯å¼€å‘è€…è¿è¡Œ <code>npm run gen:types</code></li>
          <li>è‡ªåŠ¨ç”Ÿæˆçš„æ–°ç±»å‹åŒ…å« phone å­—æ®µ</li>
          <li>TypeScript ç¼–è¯‘å™¨ä¼šæç¤ºæ‰€æœ‰éœ€è¦æ›´æ–°çš„åœ°æ–¹</li>
          <li>å‰ç«¯å¼€å‘è€…æ ¹æ®æç¤ºæ›´æ–°ä»£ç </li>
        </ol>
      </div>

      <div class="feature-list">
        <h4>âœ… æ ¸å¿ƒä¼˜åŠ¿</h4>
        <ul>
          <li><strong>ç±»å‹å®‰å…¨ï¼š</strong>ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¿å…å­—æ®µæ‹¼å†™é”™è¯¯</li>
          <li><strong>è¿è¡Œæ—¶æ ¡éªŒï¼š</strong>Zod ç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®</li>
          <li><strong>è‡ªåŠ¨åŒæ­¥ï¼š</strong>åç«¯ API å˜æ›´è‡ªåŠ¨åæ˜ åˆ°å‰ç«¯ç±»å‹</li>
          <li><strong>å¼€å‘ä½“éªŒï¼š</strong>IDE è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æç¤º</li>
        </ul>
      </div>

      <div style="text-align: center;">
        <a href={`${import.meta.env.BASE_URL}`} class="back-link">â† è¿”å›é¦–é¡µ</a>
      </div>
    </div>
  </body>
</html>
