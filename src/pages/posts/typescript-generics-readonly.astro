---
// TypeScriptæ³›å‹ä¸readonlyç»“åˆä½¿ç”¨æ–‡ç« é¡µé¢
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TypeScriptä¸­çš„æ³›å‹å¦‚ä½•ä¸readonlyçš„ç»“åˆä½¿ç”¨ï¼Ÿ</title>
    
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
        background: #f8f9fa;
        color: #333;
      }
      .container {
        background: white;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
      }
      h2 {
        color: #34495e;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-top: 30px;
      }
      h3 {
        color: #2c3e50;
        margin-top: 25px;
      }
      .back-link {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        margin-top: 30px;
        transition: background 0.3s ease;
      }
      .back-link:hover {
        background: #2980b9;
      }
      .meta-info {
        text-align: center;
        color: #7f8c8d;
        margin-bottom: 30px;
        padding: 15px;
        background: #ecf0f1;
        border-radius: 8px;
      }
      .highlight-box {
        background: #fff3cd;
        padding: 20px;
        border-radius: 8px;
        border-left: 3px solid #f39c12;
        margin: 20px 0;
      }
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        border-radius: 8px;
        padding: 20px;
        margin: 15px 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
        overflow-x: auto;
        border-left: 4px solid #4299e1;
      }
      .code-comment {
        color: #68d391;
      }
      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        font-size: 0.9em;
      }
      .comparison-table th,
      .comparison-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e0e0e0;
        vertical-align: top;
      }
      .comparison-table th {
        background: #3498db;
        color: white;
        font-weight: 600;
        text-align: center;
      }
      .comparison-table tr:hover {
        background: #f8f9fa;
      }
      .comparison-table td:first-child {
        font-weight: 600;
        background: #f8f9fa;
        color: #2c3e50;
      }
      .feature-list {
        background: #e8f5e8;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #27ae60;
        margin: 20px 0;
      }
      .section-box {
        background: #f0f8ff;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #2196f3;
        margin: 20px 0;
      }
      .error-box {
        background: #ffe8e8;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #e74c3c;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸš€ TypeScriptä¸­çš„æ³›å‹å¦‚ä½•ä¸readonlyçš„ç»“åˆä½¿ç”¨ï¼Ÿ</h1>

      <div class="meta-info">
        <p>ğŸ“… å‘å¸ƒäº 2026å¹´1æœˆ | ğŸ‘¤ ä½œè€…ï¼šåšä¸» | ğŸ·ï¸ æ ‡ç­¾ï¼šTypeScript, æ³›å‹, readonly, ç±»å‹å®‰å…¨, ä¸å¯å˜æ•°æ®, Webå¼€å‘, å‰ç«¯, é¢è¯•</p>
      </div>

      <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢æ–‡ç« ï¼æ‰€æœ‰æ–‡ç« éƒ½æ˜¯æ»¡æ»¡çš„å‰ç«¯å¹²è´§ï¼Œæ–‡ç« ç®€æ˜æ‰¼è¦ã€‚</p>

      <div class="highlight-box">
        <h4>æ ¸å¿ƒä½œç”¨</h4>
        <p>ä¸»è¦ç”¨äºåœ¨ä¿æŒç±»å‹å®‰å…¨çš„åŒæ—¶ï¼Œé˜²æ­¢æ„å¤–ä¿®æ”¹æ•°æ®ï¼ˆå°¤å…¶æ˜¯å‡½æ•°å‚æ•°æˆ–è¿”å›å€¼ï¼‰ã€‚è¿™ç§ç»„åˆå¹¿æ³›åº”ç”¨äºå‡½æ•°å¼ç¼–ç¨‹ã€ä¸å¯å˜æ•°æ®å¤„ç†å’Œ React ç­‰æ¡†æ¶ä¸­ã€‚</p>
      </div>

      <h2>1. æ³›å‹å‡½æ•°å‚æ•°ä½¿ç”¨ readonly æ•°ç»„</h2>

      <div class="code-block">
function first&lt;T&gt;(arr: readonly T[]): T | undefined {`{`}<br>
&nbsp;&nbsp;return arr[0];<br>
{`}`}<br><br>

const numbers = [1, 2, 3] as const; <span class="code-comment">// ç±»å‹ï¼šreadonly [1, 2, 3]</span><br>
<span class="code-comment">// æˆ–æ™®é€šæ•°ç»„ï¼š</span><br>
const list = [10, 20, 30]; <span class="code-comment">// ç±»å‹ï¼šnumber[]</span><br><br>

first(numbers); <span class="code-comment">// âœ… å…è®¸ï¼šreadonly [1,2,3] æ»¡è¶³ readonly T[]</span><br>
first(list); <span class="code-comment">// âœ… å…è®¸ï¼šnumber[] æ˜¯ readonly number[] çš„å­ç±»å‹ï¼ˆåå˜ï¼‰</span>
      </div>

      <div class="feature-list">
        <h4>âœ… ä¼˜åŠ¿</h4>
        <p>ä½¿ç”¨ <code>readonly T[]</code> è€Œé <code>T[]</code>ï¼Œè¡¨ç¤ºå‡½æ•°ä¸ä¼šä¿®æ”¹ä¼ å…¥çš„æ•°ç»„ï¼Œæ›´å®‰å…¨ã€‚</p>
      </div>

      <h2>2. æ³›å‹æ¥å£/ç±»å‹ä¸­ä½¿ç”¨ readonly å±æ€§</h2>

      <div class="code-block">
interface ReadonlyBox&lt;T&gt; {`{`}<br>
&nbsp;&nbsp;readonly value: T;<br>
{`}`}<br><br>

const box: ReadonlyBox&lt;string&gt; = {`{`} value: "hello" {`}`};<br>
<span class="code-comment">// box.value = "world"; // âŒ é”™è¯¯ï¼value æ˜¯åªè¯»çš„</span>
      </div>

      <h2>3. readonly ä¸æ³›å‹çº¦æŸï¼ˆextendsï¼‰ç»“åˆ</h2>

      <div class="code-block">
function logLength&lt;T extends readonly any[]&gt;(arr: T): number {`{`}<br>
&nbsp;&nbsp;console.log(arr.length);<br>
&nbsp;&nbsp;return arr.length;<br>
{`}`}<br><br>

logLength([1, 2, 3]); <span class="code-comment">// âœ… OK</span><br>
logLength(["a", "b"] as const); <span class="code-comment">// âœ… OK</span>
      </div>

      <div class="feature-list">
        <h4>âœ… ä½œç”¨</h4>
        <p>é€šè¿‡ <code>T extends readonly any[]</code> çº¦æŸæ³›å‹å¿…é¡»æ˜¯åªè¯»æ•°ç»„ç±»å‹ï¼ˆåŒ…æ‹¬æ™®é€šæ•°ç»„å’Œ readonly æ•°ç»„ï¼‰ã€‚</p>
      </div>

      <h2>4. React ä¸­çš„å…¸å‹åº”ç”¨ï¼ˆProps ä¸ºåªè¯»ï¼‰</h2>

      <div class="code-block">
interface Props&lt;T&gt; {`{`}<br>
&nbsp;&nbsp;readonly items: readonly T[];<br>
&nbsp;&nbsp;readonly onSelect: (item: T) => void;<br>
{`}`}<br><br>

function List&lt;T&gt;({`{`} items, onSelect {`}`}: Props&lt;T&gt;) {`{`}<br>
&nbsp;&nbsp;return (<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{`{`}items.map((item, i) => (<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li key={`{`}i{`}`} onClick={`{`}() => onSelect(item){`}`}&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{`{`}String(item){`}`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)){`}`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;);<br>
{`}`}
      </div>

      <div class="feature-list">
        <h4>âœ… React ç‰¹æ€§</h4>
        <p>React ç»„ä»¶çš„ props å¤©ç„¶æ˜¯åªè¯»çš„ï¼Œé…åˆæ³›å‹å¯å®ç°ç±»å‹å®‰å…¨çš„é€šç”¨ç»„ä»¶ã€‚</p>
      </div>

      <h2>âš ï¸ æ³¨æ„äº‹é¡¹</h2>

      <div class="section-box">
        <ul>
          <li><code>T[]</code> æ˜¯ <code>readonly T[]</code> çš„å­ç±»å‹ï¼ˆå¯ä»¥èµ‹å€¼ç»™ <code>readonly T[]</code>ï¼‰ï¼Œä½†åè¿‡æ¥ä¸è¡Œã€‚</li>
          <li><code>as const</code> ä¼šå°†å­—é¢é‡æ¨æ–­ä¸ºæœ€çª„çš„ <code>readonly</code> ç±»å‹ï¼Œå¸¸ä¸æ³›å‹å‡½æ•°é…åˆä½¿ç”¨ã€‚</li>
          <li><code>readonly</code> æ˜¯ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œè¿è¡Œæ—¶ä»å¯é€šè¿‡ç±»å‹æ–­è¨€ç»•è¿‡ï¼ˆä½†ä¸æ¨èï¼‰ã€‚</li>
        </ul>
      </div>

      <h2>å®Œæ•´ç¤ºä¾‹ï¼šä¸å¯å˜æ•°æ®å¤„ç†</h2>

      <div class="code-block">
<span class="code-comment">// ç¤ºä¾‹ 1ï¼šåªè¯»æ•°ç»„æ“ä½œ</span><br>
function append&lt;T&gt;(arr: readonly T[], item: T): readonly T[] {`{`}<br>
&nbsp;&nbsp;return [...arr, item]; <span class="code-comment">// è¿”å›æ–°æ•°ç»„ï¼Œä¸ä¿®æ”¹åŸæ•°ç»„</span><br>
{`}`}<br><br>

const original = [1, 2, 3] as const;<br>
const newArr = append(original, 4);<br>
console.log(original); <span class="code-comment">// [1, 2, 3] åŸæ•°ç»„æœªæ”¹å˜</span><br>
console.log(newArr); <span class="code-comment">// [1, 2, 3, 4]</span><br><br>

<span class="code-comment">// ç¤ºä¾‹ 2ï¼šåªè¯»å¯¹è±¡</span><br>
interface User {`{`}<br>
&nbsp;&nbsp;readonly id: number;<br>
&nbsp;&nbsp;readonly name: string;<br>
{`}`}<br><br>

function updateUser&lt;T extends User&gt;(user: T, updates: Partial&lt;T&gt;): T {`{`}<br>
&nbsp;&nbsp;return {`{`} ...user, ...updates {`}`}; <span class="code-comment">// è¿”å›æ–°å¯¹è±¡</span><br>
{`}`}<br><br>

const user: User = {`{`} id: 1, name: "Alice" {`}`};<br>
const updated = updateUser(user, {`{`} name: "Bob" {`}`});<br>
console.log(user); <span class="code-comment">// {`{`} id: 1, name: "Alice" {`}`} åŸå¯¹è±¡æœªæ”¹å˜</span><br>
console.log(updated); <span class="code-comment">// {`{`} id: 1, name: "Bob" {`}`}</span>
      </div>

      <h2>å®æˆ˜åœºæ™¯å¯¹æ¯”</h2>

      <table class="comparison-table">
        <thead>
          <tr>
            <th>åœºæ™¯</th>
            <th>å†™æ³•</th>
            <th>ä½œç”¨</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>åªè¯»æ•°ç»„å‚æ•°</td>
            <td>readonly T[]</td>
            <td>é˜²æ­¢å‡½æ•°å†…éƒ¨ä¿®æ”¹æ•°ç»„</td>
          </tr>
          <tr>
            <td>åªè¯»å±æ€§</td>
            <td>readonly value: T</td>
            <td>åˆ›å»ºä¸å¯å˜å¯¹è±¡</td>
          </tr>
          <tr>
            <td>è¿”å›åªè¯»ç»“æ„</td>
            <td>Readonly&lt;T&gt; æˆ– readonly [T, U]</td>
            <td>ä¿è¯è°ƒç”¨è€…ä¸ä¿®æ”¹ç»“æœ</td>
          </tr>
          <tr>
            <td>æ³›å‹çº¦æŸ</td>
            <td>T extends readonly any[]</td>
            <td>é™åˆ¶ä¼ å…¥ç±»å‹ä¸ºåªè¯»æ•°ç»„</td>
          </tr>
        </tbody>
      </table>

      <h2>é«˜çº§ç”¨æ³•ï¼šæ·±åº¦åªè¯»</h2>

      <div class="code-block">
<span class="code-comment">// é€’å½’å®ç°æ·±åº¦åªè¯»</span><br>
type DeepReadonly&lt;T&gt; = {`{`}<br>
&nbsp;&nbsp;readonly [P in keyof T]: T[P] extends object<br>
&nbsp;&nbsp;&nbsp;&nbsp;? DeepReadonly&lt;T[P]&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;: T[P];<br>
{`}`};<br><br>

interface Config {`{`}<br>
&nbsp;&nbsp;database: {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;host: string;<br>
&nbsp;&nbsp;&nbsp;&nbsp;port: number;<br>
&nbsp;&nbsp;{`}`};<br>
&nbsp;&nbsp;cache: {`{`}<br>
&nbsp;&nbsp;&nbsp;&nbsp;enabled: boolean;<br>
&nbsp;&nbsp;{`}`};<br>
{`}`}<br><br>

const config: DeepReadonly&lt;Config&gt; = {`{`}<br>
&nbsp;&nbsp;database: {`{`} host: "localhost", port: 5432 {`}`},<br>
&nbsp;&nbsp;cache: {`{`} enabled: true {`}`},<br>
{`}`};<br><br>

<span class="code-comment">// config.database.host = "new"; // âŒ é”™è¯¯ï¼æ·±åº¦åªè¯»</span>
      </div>

      <h2>æ€»ç»“</h2>

      <div class="highlight-box">
        <h4>ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
        <ul>
          <li><strong>ç±»å‹å®‰å…¨ï¼š</strong>æ³›å‹æä¾›çµæ´»æ€§ï¼Œreadonly æä¾›ä¸å¯å˜æ€§ä¿éšœ</li>
          <li><strong>å‡½æ•°å¼ç¼–ç¨‹ï¼š</strong>é…åˆä½¿ç”¨å®ç°çº¯å‡½æ•°å’Œä¸å¯å˜æ•°æ®</li>
          <li><strong>React å¼€å‘ï¼š</strong>Props å¤©ç„¶åªè¯»ï¼Œæ³›å‹å®ç°é€šç”¨ç»„ä»¶</li>
          <li><strong>ç¼–è¯‘æ—¶æ£€æŸ¥ï¼š</strong>åœ¨å¼€å‘é˜¶æ®µå°±å‘ç°æ½œåœ¨çš„æ•°æ®ä¿®æ”¹é—®é¢˜</li>
          <li><strong>åå˜ç‰¹æ€§ï¼š</strong>æ™®é€šæ•°ç»„å¯ä»¥èµ‹å€¼ç»™åªè¯»æ•°ç»„å‚æ•°</li>
        </ul>
      </div>

      <div style="text-align: center;">
        <a href={`${import.meta.env.BASE_URL}`} class="back-link">â† è¿”å›é¦–é¡µ</a>
      </div>
    </div>
  </body>
</html>
